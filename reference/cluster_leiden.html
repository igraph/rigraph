<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Finding community structure of a graph using the Leiden algorithm of Traag, van Eck &amp; Waltman. — cluster_leiden • igraph</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Finding community structure of a graph using the Leiden algorithm of Traag, van Eck &amp; Waltman. — cluster_leiden"><meta name="description" content="The Leiden algorithm is similar to the Louvain algorithm,
cluster_louvain(), but it is faster and yields higher quality
solutions. It can optimize both modularity and the Constant Potts Model,
which does not suffer from the resolution-limit (see preprint
http://arxiv.org/abs/1104.3083)."><meta property="og:description" content="The Leiden algorithm is similar to the Louvain algorithm,
cluster_louvain(), but it is faster and yields higher quality
solutions. It can optimize both modularity and the Constant Potts Model,
which does not suffer from the resolution-limit (see preprint
http://arxiv.org/abs/1104.3083)."><meta property="og:image" content="https://r.igraph.org/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">igraph</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.3.9059</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-get-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Get started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-get-started"><li><a class="dropdown-item" href="../articles/igraph.html">Intro</a></li>
    <li><a class="dropdown-item" href="../articles/igraph_ES.html">Intro (Español)</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/installation-troubleshooting.html">Installation FAQs</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">All articles</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/igraph/rigraph/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Finding community structure of a graph using the Leiden algorithm of Traag, van Eck &amp; Waltman.</h1>
      <small class="dont-index">Source: <a href="https://github.com/igraph/rigraph/blob/main/R/community.R" class="external-link"><code>R/community.R</code></a></small>
      <div class="d-none name"><code>cluster_leiden.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The Leiden algorithm is similar to the Louvain algorithm,
<code><a href="cluster_louvain.html">cluster_louvain()</a></code>, but it is faster and yields higher quality
solutions. It can optimize both modularity and the Constant Potts Model,
which does not suffer from the resolution-limit (see preprint
http://arxiv.org/abs/1104.3083).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cluster_leiden</span><span class="op">(</span></span>
<span>  <span class="va">graph</span>,</span>
<span>  objective_function <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CPM"</span>, <span class="st">"modularity"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  resolution_parameter <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  beta <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  initial_membership <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_iterations <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  vertex_weights <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-graph">graph<a class="anchor" aria-label="anchor" href="#arg-graph"></a></dt>
<dd><p>The input graph, only undirected graphs are supported.</p></dd>


<dt id="arg-objective-function">objective_function<a class="anchor" aria-label="anchor" href="#arg-objective-function"></a></dt>
<dd><p>Whether to use the Constant Potts Model (CPM) or
modularity. Must be either <code>"CPM"</code> or <code>"modularity"</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>These dots are for future extensions and must be empty.</p></dd>


<dt id="arg-weights">weights<a class="anchor" aria-label="anchor" href="#arg-weights"></a></dt>
<dd><p>The weights of the edges. It must be a positive numeric vector,
<code>NULL</code> or <code>NA</code>. If it is <code>NULL</code> and the input graph has a
‘weight’ edge attribute, then that attribute will be used. If
<code>NULL</code> and no such attribute is present, then the edges will have equal
weights. Set this to <code>NA</code> if the graph was a ‘weight’ edge
attribute, but you don't want to use it for community detection. A larger
edge weight means a stronger connection for this function.</p></dd>


<dt id="arg-resolution">resolution<a class="anchor" aria-label="anchor" href="#arg-resolution"></a></dt>
<dd><p>The resolution parameter to use. Higher
resolutions lead to more smaller communities, while lower resolutions lead
to fewer larger communities.</p></dd>


<dt id="arg-resolution-parameter">resolution_parameter<a class="anchor" aria-label="anchor" href="#arg-resolution-parameter"></a></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded" class="external-link"><img src="figures/lifecycle-superseded.svg" alt="[Superseded]"></a> Use <code>resolution</code> instead.</p></dd>


<dt id="arg-beta">beta<a class="anchor" aria-label="anchor" href="#arg-beta"></a></dt>
<dd><p>Parameter affecting the randomness in the Leiden algorithm.
This affects only the refinement step of the algorithm.</p></dd>


<dt id="arg-initial-membership">initial_membership<a class="anchor" aria-label="anchor" href="#arg-initial-membership"></a></dt>
<dd><p>If provided, the Leiden algorithm
will try to improve this provided membership. If no argument is
provided, the aglorithm simply starts from the singleton partition.</p></dd>


<dt id="arg-n-iterations">n_iterations<a class="anchor" aria-label="anchor" href="#arg-n-iterations"></a></dt>
<dd><p>the number of iterations to iterate the Leiden
algorithm. Each iteration may improve the partition further.</p></dd>


<dt id="arg-vertex-weights">vertex_weights<a class="anchor" aria-label="anchor" href="#arg-vertex-weights"></a></dt>
<dd><p>the vertex weights used in the Leiden algorithm.
If this is not provided, it will be automatically determined on the basis
of the <code>objective_function</code>. Please see the details of this function
how to interpret the vertex weights.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>cluster_leiden()</code> returns a <code><a href="communities.html">communities()</a></code>
object, please see the <code><a href="communities.html">communities()</a></code> manual page for details.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The Leiden algorithm consists of three phases: (1) local moving of nodes,
(2) refinement of the partition and (3) aggregation of the network based on
the refined partition, using the non-refined partition to create an initial
partition for the aggregate network. In the local move procedure in the
Leiden algorithm, only nodes whose neighborhood has changed are visited. The
refinement is done by restarting from a singleton partition within each
cluster and gradually merging the subclusters. When aggregating, a single
cluster may then be represented by several nodes (which are the subclusters
identified in the refinement).</p>
<p>The Leiden algorithm provides several guarantees. The Leiden algorithm is
typically iterated: the output of one iteration is used as the input for the
next iteration. At each iteration all clusters are guaranteed to be
connected and well-separated. After an iteration in which nothing has
changed, all nodes and some parts are guaranteed to be locally optimally
assigned. Finally, asymptotically, all subsets of all clusters are
guaranteed to be locally optimally assigned. For more details, please see
Traag, Waltman &amp; van Eck (2019).</p>
<p>The objective function being optimized is</p>
<p>$$\frac{1}{2m} \sum_{ij} (A_{ij} - \gamma n_i n_j)\delta(\sigma_i, \sigma_j)$$</p>
<p>where \(m\) is the total edge weight, \(A_{ij}\) is the weight
of edge \((i, j)\), \(\gamma\) is the so-called resolution
parameter, \(n_i\) is the node weight of node \(i\), \(\sigma_i\)
is the cluster of node \(i\) and \(\delta(x, y) = 1\) if and
only if \(x = y\) and \(0\) otherwise. By setting \(n_i = k_i\), the
degree of node \(i\), and dividing \(\gamma\) by \(2m\), you
effectively obtain an expression for modularity.</p>
<p>Hence, the standard modularity will be optimized when you supply the degrees
as <code>vertex_weights</code> and by supplying as a resolution parameter
\(\frac{1}{2m}\), with \(m\) the number of edges. If you do not
specify any <code>vertex_weights</code>, the correct vertex weights and scaling of
\(\gamma\) is determined automatically by the
<code>objective_function</code> argument.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Traag, V. A., Waltman, L., &amp; van Eck, N. J. (2019). From Louvain
to Leiden: guaranteeing well-connected communities. Scientific
reports, 9(1), 5233. doi: 10.1038/s41598-019-41695-z, arXiv:1810.08473v3 [cs.SI]</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>See <code><a href="communities.html">communities()</a></code> for extracting the membership,
modularity scores, etc. from the results.</p>
<p>Other community detection algorithms: <code><a href="cluster_walktrap.html">cluster_walktrap()</a></code>,
<code><a href="cluster_spinglass.html">cluster_spinglass()</a></code>,
<code><a href="cluster_leading_eigen.html">cluster_leading_eigen()</a></code>,
<code><a href="cluster_edge_betweenness.html">cluster_edge_betweenness()</a></code>,
<code><a href="cluster_fast_greedy.html">cluster_fast_greedy()</a></code>,
<code><a href="cluster_label_prop.html">cluster_label_prop()</a></code>
<code><a href="cluster_louvain.html">cluster_louvain()</a></code>
<code><a href="cluster_fluid_communities.html">cluster_fluid_communities()</a></code>
<code><a href="cluster_infomap.html">cluster_infomap()</a></code>
<code><a href="cluster_optimal.html">cluster_optimal()</a></code>
<code><a href="cluster_walktrap.html">cluster_walktrap()</a></code></p>
<p>Community detection
<code><a href="as_membership.html">as_membership</a>()</code>,
<code><a href="cluster_edge_betweenness.html">cluster_edge_betweenness</a>()</code>,
<code><a href="cluster_fast_greedy.html">cluster_fast_greedy</a>()</code>,
<code><a href="cluster_fluid_communities.html">cluster_fluid_communities</a>()</code>,
<code><a href="cluster_infomap.html">cluster_infomap</a>()</code>,
<code><a href="cluster_label_prop.html">cluster_label_prop</a>()</code>,
<code><a href="cluster_leading_eigen.html">cluster_leading_eigen</a>()</code>,
<code><a href="cluster_louvain.html">cluster_louvain</a>()</code>,
<code><a href="cluster_optimal.html">cluster_optimal</a>()</code>,
<code><a href="cluster_spinglass.html">cluster_spinglass</a>()</code>,
<code><a href="cluster_walktrap.html">cluster_walktrap</a>()</code>,
<code><a href="compare.html">compare</a>()</code>,
<code><a href="groups.html">groups</a>()</code>,
<code><a href="make_clusters.html">make_clusters</a>()</code>,
<code><a href="communities.html">membership</a>()</code>,
<code><a href="modularity.igraph.html">modularity.igraph</a>()</code>,
<code><a href="plot_dendrogram.communities.html">plot_dendrogram</a>()</code>,
<code><a href="split_join_distance.html">split_join_distance</a>()</code>,
<code><a href="voronoi_cells.html">voronoi_cells</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Vincent Traag</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="make_graph.html">make_graph</a></span><span class="op">(</span><span class="st">"Zachary"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># By default CPM is used</span></span></span>
<span class="r-in"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="fu"><a href="strength.html">strength</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">/</span> <span class="op">(</span><span class="fu"><a href="gorder.html">gorder</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Set seed for sake of reproducibility</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ldc</span> <span class="op">&lt;-</span> <span class="fu">cluster_leiden</span><span class="op">(</span><span class="va">g</span>, resolution <span class="op">=</span> <span class="va">r</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ldc</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IGRAPH clustering leiden, groups: 2, mod: NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + groups:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   $`1`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    [1]  1  2  3  4  5  6  7  8 10 11 12 13 14 17 18 20 22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   $`2`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    [1]  9 15 16 19 21 23 24 25 26 27 28 29 30 31 32 33 34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ldc</span>, <span class="va">g</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="cluster_leiden-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>, <a href="https://github.com/ntamas" class="external-link">Tamás Nepusz</a>, <a href="https://www.traag.net/" class="external-link">Vincent Traag</a>, <a href="http://szhorvat.net/" class="external-link">Szabolcs Horvát</a>, <a href="https://fabilab.org/pages/people.html" class="external-link">Fabio Zanini</a>, <a href="https://github.com/GroteGnoom" class="external-link">Daniel Noom</a>, <a href="https://krlmlr.info/" class="external-link">Kirill Müller</a>, Chan Zuckerberg Initiative.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>


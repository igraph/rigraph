<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>How igraph functions handle attributes when the graph changes — igraph-attribute-combination • igraph</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How igraph functions handle attributes when the graph changes — igraph-attribute-combination"><meta name="description" content="Many times, when the structure of a graph is modified, vertices/edges map of
the original graph map to vertices/edges in the newly created (modified)
graph. For example simplify() maps multiple edges to single
edges. igraph provides a flexible mechanism to specify what to do with the
vertex/edge attributes in these cases."><meta property="og:description" content="Many times, when the structure of a graph is modified, vertices/edges map of
the original graph map to vertices/edges in the newly created (modified)
graph. For example simplify() maps multiple edges to single
edges. igraph provides a flexible mechanism to specify what to do with the
vertex/edge attributes in these cases."><meta property="og:image" content="https://r.igraph.org/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">igraph</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-get-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Get started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-get-started"><li><a class="dropdown-item" href="../articles/igraph.html">Intro</a></li>
    <li><a class="dropdown-item" href="../articles/igraph_ES.html">Intro (Español)</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/installation-troubleshooting.html">Installation FAQs</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">All articles</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/igraph/rigraph/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>How igraph functions handle attributes when the graph changes</h1>
      <small class="dont-index">Source: <a href="https://github.com/igraph/rigraph/blob/v2.0.3/R/attributes.R" class="external-link"><code>R/attributes.R</code></a></small>
      <div class="d-none name"><code>igraph-attribute-combination.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Many times, when the structure of a graph is modified, vertices/edges map of
the original graph map to vertices/edges in the newly created (modified)
graph. For example <code><a href="simplify.html">simplify()</a></code> maps multiple edges to single
edges. igraph provides a flexible mechanism to specify what to do with the
vertex/edge attributes in these cases.</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The functions that support the combination of attributes have one or two
extra arguments called <code>vertex.attr.comb</code> and/or <code>edge.attr.comb</code>
that specify how to perform the mapping of the attributes. E.g.
<code><a href="contract.html">contract()</a></code> contracts many vertices into a single one, the
attributes of the vertices can be combined and stores as the vertex
attributes of the new graph.</p>
<p>The specification of the combination of (vertex or edge) attributes can be
given as</p><ol><li><p>a character scalar,</p></li>
<li><p>a function object or</p></li>
<li><p>a list of character scalars and/or function objects.</p></li>
</ol><p>If it is a character scalar, then it refers to one of the predefined
combinations, see their list below.</p>
<p>If it is a function, then the given function is expected to perform the
combination. It will be called once for each new vertex/edge in the graph,
with a single argument: the attribute values of the vertices that map to
that single vertex.</p>
<p>The third option, a list can be used to specify different combination
methods for different attributes. A named entry of the list corresponds to
the attribute with the same name. An unnamed entry (i.e. if the name is the
empty string) of the list specifies the default combination method. I.e.</p><div class="sourceCode"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>weight<span class="op">=</span><span class="st">"sum"</span>, <span class="st">"ignore"</span><span class="op">)</span></span></code></pre></div><p>specifies that the weight of the
new edge should be sum of the weights of the corresponding edges in the old
graph; and that the rest of the attributes should be ignored (=dropped).</p>
    </div>
    <div class="section level2">
    <h2 id="predefined-combination-functions">Predefined combination functions<a class="anchor" aria-label="anchor" href="#predefined-combination-functions"></a></h2>
    <p>The following combination
behaviors are predefined:</p><dl><dt>"ignore"</dt>
<dd><p>The attribute is
ignored and dropped.</p></dd>
 <dt>"sum"</dt>
<dd><p>The sum of the attributes is
calculated. This does not work for character attributes and works for
complex attributes only if they have a <code>sum</code> generic defined. (E.g. it
works for sparse matrices from the <code>Matrix</code> package, because they have
a <code>sum</code> method.)</p></dd>
 <dt>"prod"</dt>
<dd><p>The product of the attributes is
calculated. This does not work for character attributes and works for
complex attributes only if they have a <code>prod</code> function defined.</p></dd>

<dt>"min"</dt>
<dd><p>The minimum of the attributes is calculated and returned.
For character and complex attributes the standard R <code>min</code> function is
used.</p></dd>
 <dt>"max"</dt>
<dd><p>The maximum of the attributes is calculated and
returned. For character and complex attributes the standard R <code>max</code>
function is used.</p></dd>
 <dt>"random"</dt>
<dd><p>Chooses one of the supplied
attribute values, uniformly randomly. For character and complex attributes
this is implemented by calling <code>sample</code>.</p></dd>
 <dt>"first"</dt>
<dd><p>Always
chooses the first attribute value. It is implemented by calling the
<code>head</code> function.</p></dd>
 <dt>"last"</dt>
<dd><p>Always chooses the last attribute
value. It is implemented by calling the <code>tail</code> function.</p></dd>

<dt>"mean"</dt>
<dd><p>The mean of the attributes is calculated and returned.
For character and complex attributes this simply calls the <code>mean</code>
function.</p></dd>
 <dt>"median"</dt>
<dd><p>The median of the attributes is selected.
Calls the R <code>median</code> function for all attribute types.</p></dd>

<dt>"concat"</dt>
<dd><p>Concatenate the attributes, using the <code>c</code>
function. This results almost always a complex attribute.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="graph_attr.html">graph_attr()</a></code>, <code><a href="vertex_attr.html">vertex_attr()</a></code>,
<code><a href="edge_attr.html">edge_attr()</a></code> on how to use graph/vertex/edge attributes in
general. <code><a href="igraph_options.html">igraph_options()</a></code> on igraph parameters.</p>
<p>Vertex, edge and graph attributes
<code><a href="delete_edge_attr.html">delete_edge_attr</a>()</code>,
<code><a href="delete_graph_attr.html">delete_graph_attr</a>()</code>,
<code><a href="delete_vertex_attr.html">delete_vertex_attr</a>()</code>,
<code><a href="edge_attr.html">edge_attr</a>()</code>,
<code>edge_attr&lt;-()</code>,
<code><a href="edge_attr_names.html">edge_attr_names</a>()</code>,
<code><a href="graph_attr.html">graph_attr</a>()</code>,
<code>graph_attr&lt;-()</code>,
<code><a href="graph_attr_names.html">graph_attr_names</a>()</code>,
<code><a href="igraph-dollar.html">igraph-dollar</a></code>,
<code><a href="igraph-vs-attributes.html">igraph-vs-attributes</a></code>,
<code><a href="set_edge_attr.html">set_edge_attr</a>()</code>,
<code><a href="set_graph_attr.html">set_graph_attr</a>()</code>,
<code><a href="set_vertex_attr.html">set_vertex_attr</a>()</code>,
<code><a href="vertex_attr.html">vertex_attr</a>()</code>,
<code>vertex_attr&lt;-()</code>,
<code><a href="vertex_attr_names.html">vertex_attr_names</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Gabor Csardi <a href="mailto:csardi.gabor@gmail.com">csardi.gabor@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="make_graph.html">make_graph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="E.html">E</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">weight</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## print attribute values with the graph</span></span></span>
<span class="r-in"><span><span class="fu"><a href="igraph_options.html">igraph_options</a></span><span class="op">(</span>print.graph.attributes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="igraph_options.html">igraph_options</a></span><span class="op">(</span>print.vertex.attributes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="igraph_options.html">igraph_options</a></span><span class="op">(</span>print.edge.attributes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## new attribute is the sum of the old ones</span></span></span>
<span class="r-in"><span><span class="fu"><a href="simplify.html">simplify</a></span><span class="op">(</span><span class="va">g</span>, edge.attr.comb <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IGRAPH 7f72813 D-W- 4 3 -- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + attr: weight (e/n)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + edges from 7f72813:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1-&gt;2 2-&gt;3 3-&gt;4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## collect attributes into a string</span></span></span>
<span class="r-in"><span><span class="fu"><a href="simplify.html">simplify</a></span><span class="op">(</span><span class="va">g</span>, edge.attr.comb <span class="op">=</span> <span class="va">toString</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IGRAPH 24e0dc9 D-W- 4 3 -- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + attr: weight (e/c)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + edges from 24e0dc9:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1-&gt;2 2-&gt;3 3-&gt;4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## concatenate them into a vector, this creates a complex</span></span></span>
<span class="r-in"><span><span class="co">## attribute</span></span></span>
<span class="r-in"><span><span class="fu"><a href="simplify.html">simplify</a></span><span class="op">(</span><span class="va">g</span>, edge.attr.comb <span class="op">=</span> <span class="st">"concat"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IGRAPH f6784a8 D-W- 4 3 -- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + attr: weight (e/x)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + edges from f6784a8:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1-&gt;2 2-&gt;3 3-&gt;4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="E.html">E</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="va">letters</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="gsize.html">ecount</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## both attributes are collected into strings</span></span></span>
<span class="r-in"><span><span class="fu"><a href="simplify.html">simplify</a></span><span class="op">(</span><span class="va">g</span>, edge.attr.comb <span class="op">=</span> <span class="va">toString</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IGRAPH f9ec4b6 D-W- 4 3 -- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + attr: weight (e/c), name (e/c)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + edges from f9ec4b6:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1-&gt;2 2-&gt;3 3-&gt;4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## harmonic average of weights, names are dropped</span></span></span>
<span class="r-in"><span><span class="fu"><a href="simplify.html">simplify</a></span><span class="op">(</span><span class="va">g</span>, edge.attr.comb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="va">x</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">"ignore"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IGRAPH e52d60c D-W- 4 3 -- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + attr: weight (e/n)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> + edges from e52d60c:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1-&gt;2 2-&gt;3 3-&gt;4</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>, <a href="https://github.com/ntamas" class="external-link">Tamás Nepusz</a>, <a href="https://www.traag.net/" class="external-link">Vincent Traag</a>, <a href="http://szhorvat.net/" class="external-link">Szabolcs Horvát</a>, <a href="https://fabilab.org/pages/people.html" class="external-link">Fabio Zanini</a>, <a href="https://github.com/GroteGnoom" class="external-link">Daniel Noom</a>, <a href="https://krlmlr.info/" class="external-link">Kirill Müller</a>, Chan Zuckerberg Initiative.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

